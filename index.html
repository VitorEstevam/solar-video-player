<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Custom Viewer</title>
</head>

<body>
    <video id="video" controls playsinline="playsinline" preload="auto"></video>
    <video id="sound"  playsinline="playsinline" preload="auto"></video>
</body>

<script>
    var id;
    try {
        const urlParams = new URLSearchParams(window.location.search);
        const arr = urlParams.get('class').split("/")
        id = arr[arr.length - 1]
    } catch (error) {
        console.log(error)
    }

    if (id == undefined)
        document.querySelector("body").innerHTML = "<p>adicione o link da aula na URL</p>"

    var video = document.querySelector("#video")
    var sound = document.querySelector("#sound")

    videoUrl = "https://web.virtual.ufc.br/presentation/" + id + "/deskshare/deskshare.mp4"
    video.setAttribute('src', videoUrl);
    soundUrl = "https://web.virtual.ufc.br/presentation/" + id + "/video/webcams.mp4"
    sound.setAttribute('src', soundUrl)

    // play
    video.addEventListener("play", function () {
        console.log("play")
        sound.play()
        sound.currentTime = video.currentTime
        sound.playbackRate = video.playbackRate
    }, false);

    // pause
    video.addEventListener("pause", function () {
        console.log("pause")
        sound.pause()
    }, false);

    // ratechange
    video.addEventListener("ratechange", function () {
        console.log("rate change")
        sound.playbackRate = video.playbackRate
    }, false);

    // keep playing when change tabs
    document.addEventListener("visibilitychange", function () {
        if (document.hidden) {
            video.play()
        }
    });
</script>

<style>
    body {
        padding-left: 10%;
        padding-right: 10%;
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    #sound {
        height: 0px;
        width: 100%;
    }

    #video {
        flex: 1;
        width: 100%;
        border-style: inset;
    }
</style>

</html>